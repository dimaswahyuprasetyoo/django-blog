{% extends 'blog/base.html' %}

{% block content %}

<div class="row text-center" style="margin-bottom: 60px; margin-top: 20px;">
    <div class="col-md-12">
        <h1 style="font-family: 'Montserrat', sans-serif; font-weight: 800; font-size: 3.5em; color: #fff; margin-bottom: 10px; text-shadow: 0 5px 15px rgba(0,0,0,0.5); letter-spacing: 2px;">
            BERITA & ARTIKEL
        </h1>
        <div style="width: 100px; height: 5px; background: #f4a000; margin: 0 auto 20px auto; border-radius: 10px; box-shadow: 0 0 10px #f4a000;"></div>
        <p style="font-size: 1.2em; color: rgba(255,255,255,0.8); max-width: 600px; margin: 0 auto;">
            Informasi terkini seputar kegiatan akademik, teknologi, dan prestasi mahasiswa Pendidikan Teknik Informatika.
        </p>
    </div>
</div>

<div class="row">
    {% for post in posts %}
        <div class="col-md-4 col-sm-6" style="margin-bottom: 40px;">
            
            <div class="thumbnail card-glass" style="height: 100%; border: 1px solid rgba(255,255,255,0.1); padding: 0; position: relative; display: flex; flex-direction: column;">
                
                <div class="image-wrapper" style="height: 220px; overflow: hidden; border-radius: 15px 15px 0 0; position: relative; flex-shrink: 0;">
                     
                    <div style="position: absolute; top: 15px; right: 15px; background: rgba(10, 132, 255, 0.9); color: white; padding: 6px 12px; border-radius: 8px; font-weight: bold; font-size: 0.85em; z-index: 10; backdrop-filter: blur(5px); box-shadow: 0 4px 10px rgba(0,0,0,0.3);">
                        <span class="glyphicon glyphicon-calendar"></span> {{ post.published_date|date:"d M Y" }}
                    </div>

                    <a href="{% url 'post_detail' pk=post.pk %}">
                        {% if post.header_image %}
                            <img src="{{ post.header_image.url }}" alt="{{ post.title }}" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s;">
                        {% else %}
                            <img src="https://picsum.photos/seed/{{ post.pk }}/600/400" alt="Random Image" style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s;">
                        {% endif %}
                    </a>
                </div>
                
                <div class="caption" style="padding: 25px; display: flex; flex-direction: column; flex-grow: 1;">
                    
                    <h3 style="margin-top: 0; margin-bottom: 15px; line-height: 1.4;">
                        <a href="{% url 'post_detail' pk=post.pk %}" style="color: #fff; text-decoration: none; font-weight: 700; font-size: 1.1em; transition: color 0.3s;">
                            {{ post.title|truncatechars:50 }}
                        </a>
                    </h3>
                    
                    <p style="color: rgba(255,255,255,0.6); font-size: 0.95em; line-height: 1.6; flex-grow: 1;">
                        {{ post.text|striptags|truncatewords:15 }}
                    </p>
                    
                    <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 20px; padding-top: 15px; display: flex; justify-content: space-between; align-items: center;">
                        
                        <div style="display: flex; align-items: center; color: #f4a000; font-size: 0.9em; font-weight: 600;">
                            <span class="glyphicon glyphicon-user" style="margin-right: 5px;"></span>
                            {{ post.author }}
                        </div>

                        <a href="{% url 'post_detail' pk=post.pk %}" style="color: #0A84FF; font-weight: bold; text-decoration: none; font-size: 0.9em; display: flex; align-items: center;">
                            Baca <span class="glyphicon glyphicon-arrow-right" style="margin-left: 5px; font-size: 0.8em;"></span>
                        </a>
                    </div>

                </div>
            </div>
        </div>

        {% if forloop.counter|divisibleby:3 %}
            <div class="clearfix visible-md-block visible-lg-block"></div>
        {% endif %}
        {% if forloop.counter|divisibleby:2 %}
            <div class="clearfix visible-sm-block"></div>
        {% endif %}

    {% empty %}
        <div class="col-md-12">
            <div class="thumbnail card-glass" style="padding: 50px; text-align: center;">
                <span class="glyphicon glyphicon-inbox" style="font-size: 4em; color: rgba(255,255,255,0.3); margin-bottom: 20px;"></span>
                <h3 style="color: #fff;">Belum ada berita terbaru.</h3>
                <p style="color: rgba(255,255,255,0.6);">Silakan kembali lagi nanti untuk update terbaru dari kami.</p>
            </div>
        </div>
    {% endfor %}
</div>

<style>
    .image-wrapper:hover img {
        transform: scale(1.1); /* Efek Zoom saat hover */
    }
    .caption h3 a:hover {
        color: #0A84FF !important; /* Judul jadi biru saat hover */
    }
</style>

{% endblock %}